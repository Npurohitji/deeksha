<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>UGC NET Study Hub</title>
    <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Fredoka:wght@400;600&family=Nunito:wght@400;700&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Nunito', sans-serif; background-color: #FFFBEB; -webkit-tap-highlight-color: transparent; }
        h1, h2, button { font-family: 'Fredoka', sans-serif; }
        
        /* Funky Scrollbar */
        .custom-scroll::-webkit-scrollbar { width: 8px; }
        .custom-scroll::-webkit-scrollbar-track { background: #FFFBEB; }
        .custom-scroll::-webkit-scrollbar-thumb { background: #000; border-radius: 99px; border: 2px solid #fff; }

        /* Hide scrollbar for Tabs */
        .no-scrollbar::-webkit-scrollbar { display: none; }
        .no-scrollbar { -ms-overflow-style: none; scrollbar-width: none; }

        /* Pop Animation */
        .pop-hover:hover { transform: translate(-2px, -2px); box-shadow: 6px 6px 0px 0px #000; }
        .pop-active:active { transform: translate(0px, 0px); box-shadow: 2px 2px 0px 0px #000; }
        
        /* Base Pop Style */
        .pop-card {
            border: 3px solid #000;
            box-shadow: 4px 4px 0px 0px #000;
            transition: all 0.2s ease;
        }

        /* Floating Animation for Welcome */
        @keyframes float {
            0% { transform: translateY(0px) rotate(0deg); }
            50% { transform: translateY(-10px) rotate(1deg); }
            100% { transform: translateY(0px) rotate(0deg); }
        }
        .animate-float { animation: float 3s ease-in-out infinite; }
        
        /* Magic Input Animation */
        @keyframes border-pulse {
            0% { border-color: #000; }
            50% { border-color: #A78BFA; }
            100% { border-color: #000; }
        }
        .magic-input:focus { animation: border-pulse 2s infinite; }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect } = React;

        // Inline Icons
        const Icon = ({ children, size = 24, className = "" }) => (
            <svg xmlns="http://www.w3.org/2000/svg" width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2.5" strokeLinecap="round" strokeLinejoin="round" className={className}>
                {children}
            </svg>
        );

        const BookOpen = (p) => <Icon {...p}><path d="M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z"/><path d="M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z"/></Icon>;
        const LinkIcon = (p) => <Icon {...p}><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"/><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"/></Icon>;
        const FileText = (p) => <Icon {...p}><path d="M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z"/><polyline points="14 2 14 8 20 8"/><line x1="16" y1="13" x2="8" y2="13"/><line x1="16" y1="17" x2="8" y2="17"/><line x1="10" y1="9" x2="8" y2="9"/></Icon>;
        const Plus = (p) => <Icon {...p}><line x1="12" y1="5" x2="12" y2="19"/><line x1="5" y1="12" x2="19" y2="12"/></Icon>;
        const Trash2 = (p) => <Icon {...p}><polyline points="3 6 5 6 21 6"/><path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"/><line x1="10" y1="11" x2="10" y2="17"/><line x1="14" y1="11" x2="14" y2="17"/></Icon>;
        const GraduationCap = (p) => <Icon {...p}><path d="M22 10v6M2 10l10-5 10 5-10 5z"/><path d="M6 12v5c3 0 6-2 6-2"/></Icon>;
        const X = (p) => <Icon {...p}><line x1="18" y1="6" x2="6" y2="18"/><line x1="6" y1="6" x2="18" y2="18"/></Icon>;
        const ExternalLink = (p) => <Icon {...p}><path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"/><polyline points="15 3 21 3 21 9"/><line x1="10" y1="14" x2="21" y2="3"/></Icon>;
        const Wand2 = (p) => <Icon {...p}><path d="m21.64 3.64-1.28-1.28a1.21 1.21 0 0 0-1.72 0L2.36 18.64a1.21 1.21 0 0 0 0 1.72l1.28 1.28a1.2 1.2 0 0 0 1.72 0L21.64 5.36a1.2 1.2 0 0 0 0-1.72Z"/><path d="m14 7 3 3"/><path d="M5 6v4"/><path d="M19 14v4"/><path d="M10 2v2"/><path d="M7 8H3"/><path d="M21 16h-4"/><path d="M11 3H9"/></Icon>;

        // Fully Consolidated Data
        const initialData = [
            // --- UNIT I: DRAMA ---
            { id: 4, title: "George Chapman", unit: "Unit I: Drama", type: "Flashcards", content: "https://gemini.google.com/share/c49ea68851d6", notes: "Elizabethan playwright and translator." },
            { id: 101, title: "Elizabethan Writers", unit: "Unit I: Drama", type: "Flashcards", content: "https://gemini.google.com/share/5be5b77b459d", notes: "Overview of key writers from the Elizabethan era." },
            { id: 102, title: "Hamlet Guide", unit: "Unit I: Drama", type: "Flashcards", content: "https://gemini.google.com/share/8f6d28c93302", notes: "Shakespeare's Hamlet analysis." },
            // --- UNIT II: POETRY ---
            { id: 1, title: "Andrew Marvell Links", unit: "Unit II: Poetry", type: "Flashcards", content: "https://gemini.google.com/share/769fe0ce9e81", notes: "Links for Marvell notes." },
            { id: 2, title: "Marvell Quiz 1", unit: "Unit II: Poetry", type: "Quiz", content: "https://g.co/gemini/share/f75ca1177869", notes: "" },
            { id: 3, title: "Marvell Quiz 2", unit: "Unit II: Poetry", type: "Quiz", content: "https://g.co/gemini/share/d43f45c514a1", notes: "" },
            { id: 5, title: "Arun Kolatkar: Jejuri", unit: "Unit II: Poetry", type: "Note", content: "", notes: "Author: Arun Kolatkar (1932‚Äì2004). Publication: 1976. Commonwealth Poetry Prize 1977. Cycle of 31 poems about a day trip to Jejuri temple town. Themes: Modern disillusionment vs Tradition." },
            { id: 201, title: "Alexander Pope Notes", unit: "Unit II: Poetry", type: "Note", content: "", notes: "Source: Dr. Vineet Pandey's Lecture\n\nI. Alexander Pope: The Man & Critic\n- 'Literary Dictator of his age'.\n- 4 ft tall, hunchback, self-educated.\n- Used satire as a weapon.\n\nII. The Rape of the Lock\n- Mock-epic in heroic couplets.\n- Based on Lord Peter cutting Arabella Fermor's hair.\n- 1712: 2 Cantos. 1714: 5 Cantos + Machinery. 1717: Clarissa added.\n- Key Characters: Belinda (Arabella), Shock (Dog), Ariel/Umbriel.\n\nIII. Other Works\n- Elegy on an Unfortunate Lady: Satire on Lady Mary Wortley Montagu.\n- Epistle to Dr. Arbuthnot: Satire on Lord Hervey ('Sporus')." },
            { id: 202, title: "Pope Study Set 1", unit: "Unit II: Poetry", type: "Flashcards", content: "https://gemini.google.com/share/890927b7e518", notes: "" },
            { id: 203, title: "Pope Study Set 2", unit: "Unit II: Poetry", type: "Flashcards", content: "https://gemini.google.com/share/b4c2227fb43b", notes: "" },
            { id: 204, title: "Pope Study Set 3", unit: "Unit II: Poetry", type: "Flashcards", content: "https://gemini.google.com/share/47de9ffcfa5e", notes: "" },
            { id: 205, title: "Pope PYQs", unit: "Unit II: Poetry", type: "Quiz", content: "https://gemini.google.com/share/f0f4d3b114b0", notes: "Previous Year Questions on Pope." },
            { id: 206, title: "T.S. Eliot", unit: "Unit II: Poetry", type: "Flashcards", content: "https://gemini.google.com/share/59587b143678", notes: "" },
            { id: 207, title: "William Wordsworth", unit: "Unit II: Poetry", type: "Flashcards", content: "https://gemini.google.com/share/b2d3f3f4c2c9", notes: "" },
            { id: 208, title: "Chaucer & Tales I", unit: "Unit II: Poetry", type: "Flashcards", content: "https://gemini.google.com/share/56cd3a86e883", notes: "" },
            { id: 209, title: "Chaucer & Tales II", unit: "Unit II: Poetry", type: "Flashcards", content: "https://gemini.google.com/share/cc0473684e8b", notes: "" },
            { id: 210, title: "Chaucer & Tales III", unit: "Unit II: Poetry", type: "Flashcards", content: "https://gemini.google.com/share/828bec49cb95", notes: "" },
            // --- UNIT III: FICTION ---
            { id: 7, title: "E.M. Forster Set 1", unit: "Unit III: Fiction", type: "Flashcards", content: "https://gemini.google.com/share/86c484d3851b", notes: "Novels and context." },
            { id: 8, title: "E.M. Forster Set 2", unit: "Unit III: Fiction", type: "Quiz", content: "https://gemini.google.com/share/f73be35e3249", notes: "Critical works and themes." },
            { id: 301, title: "Charles Dickens", unit: "Unit III: Fiction", type: "Flashcards", content: "https://gemini.google.com/share/d62f9ddbe950", notes: "" },
            { id: 302, title: "Virginia Woolf", unit: "Unit III: Fiction", type: "Flashcards", content: "https://gemini.google.com/share/0247d3e4b26d", notes: "" },
            { id: 303, title: "Victorian Writers", unit: "Unit III: Fiction", type: "Flashcards", content: "https://gemini.google.com/share/472f4387af70", notes: "" },
            // --- UNIT VII: ENGLISH IN INDIA ---
            { id: 701, title: "English in India Intro", unit: "Unit VII: English in India", type: "Flashcards", content: "https://gemini.google.com/share/f0d1349a23fc", notes: "" },
            { id: 702, title: "Indian Concepts", unit: "Unit VII: English in India", type: "Flashcards", content: "https://gemini.google.com/share/c831c623e038", notes: "" },
            { id: 703, title: "English India History", unit: "Unit VII: English in India", type: "Flashcards", content: "https://gemini.google.com/share/ce0a2491f4c5", notes: "" },
            { id: 704, title: "Indian English Writers", unit: "Unit VII: English in India", type: "Flashcards", content: "https://gemini.google.com/share/fff545e6853b", notes: "" },
            { id: 705, title: "Indian Writers General", unit: "Unit VII: English in India", type: "Flashcards", content: "https://gemini.google.com/share/678388661c5c", notes: "" },
            // --- UNIT VIII: LITERARY CRITICISM ---
            { id: 6, title: "Theory Golden List", unit: "Unit VIII: Literary Criticism", type: "Note", content: "", notes: "1916: Saussure (Linguistics)\n1917: Shklovsky (Art as Technique)\n1919: TS Eliot (Tradition)\n1941: Ransom (New Criticism)\n1949: Beauvoir (Second Sex)\n1966: Derrida (Deconstruction)\n1978: Said (Orientalism)\n1990: Butler (Gender Trouble)" },
            { id: 801, title: "Criticism PYQs", unit: "Unit VIII: Literary Criticism", type: "Quiz", content: "https://gemini.google.com/share/2544d0c54bef", notes: "" },
            { id: 802, title: "General PYQs", unit: "Unit VIII: Literary Criticism", type: "Quiz", content: "https://gemini.google.com/share/5bfe687095ff", notes: "Mixed PYQs including criticism." },
            { id: 803, title: "Jacques Derrida", unit: "Unit VIII: Literary Criticism", type: "Flashcards", content: "https://gemini.google.com/share/e14c30fa5e8f", notes: "" },
            { id: 804, title: "Russian Formalism", unit: "Unit VIII: Literary Criticism", type: "Flashcards", content: "https://gemini.google.com/share/97df1402a108", notes: "" },
            { id: 805, title: "Victor Shklovsky 1", unit: "Unit VIII: Literary Criticism", type: "Flashcards", content: "https://gemini.google.com/share/3a32969b26a0", notes: "" },
            { id: 806, title: "Victor Shklovsky 2", unit: "Unit VIII: Literary Criticism", type: "Flashcards", content: "https://gemini.google.com/share/9cd2745046ec", notes: "" },
            { id: 807, title: "Roman Jakobson", unit: "Unit VIII: Literary Criticism", type: "Flashcards", content: "https://gemini.google.com/share/c07259e1b269", notes: "" },
            { id: 808, title: "Mikhail Bakhtin", unit: "Unit VIII: Literary Criticism", type: "Flashcards", content: "https://gemini.google.com/share/0258e9517f72", notes: "" }
        ];

        const units = ["All", "Unit I: Drama", "Unit II: Poetry", "Unit III: Fiction", "Unit VII: English in India", "Unit VIII: Literary Criticism"];

        const keywords = {
            "Unit I: Drama": ["drama", "play", "theatre", "tragedy", "comedy", "shakespeare", "marlowe", "jonson", "webster", "dekker", "middleton", "beckett", "pinter", "elizabethan", "hamlet"],
            "Unit II: Poetry": ["poet", "poem", "verse", "rhyme", "chaucer", "spenser", "milton", "dryden", "pope", "wordsworth", "coleridge", "keats", "shelley", "tennyson", "browning", "arnold", "eliot", "yeats", "larkin", "marvell", "jejuri", "kolatkar"],
            "Unit III: Fiction": ["fiction", "novel", "story", "austen", "dickens", "hardy", "woolf", "joyce", "lawrence", "conrad", "forster", "rushdie", "victorian"],
            "Unit VII: English in India": ["india", "indian", "dalit", "gandhi", "nehru", "tagore", "aurobindo", "roy", "karnad", "tendulkar", "datt", "ezekiel", "ramanujan", "das", "ghosh"],
            "Unit VIII: Literary Criticism": ["criticism", "theory", "structuralism", "post-structuralism", "deconstruction", "feminism", "marxism", "psychoanalysis", "colonial", "post-colonial", "said", "spivak", "bhabha", "derrida", "foucault", "lacan", "barthes", "bakhtin", "shklovsky", "russian", "formalism"]
        };

        const App = () => {
            const [showWelcome, setShowWelcome] = useState(true);
            const [resources, setResources] = useState(initialData);
            const [activeTab, setActiveTab] = useState("All");
            const [activeFilter, setActiveFilter] = useState("All");
            const [isModalOpen, setIsModalOpen] = useState(false);
            const [viewNote, setViewNote] = useState(null); 
            
            // New Resource Form
            const [newTitle, setNewTitle] = useState("");
            const [newUnit, setNewUnit] = useState("Unit I: Drama");
            const [newType, setNewType] = useState("Flashcards");
            const [newContent, setNewContent] = useState(""); 
            const [newNotes, setNewNotes] = useState("");
            const [magicInput, setMagicInput] = useState("");

            // Dual Filtering Logic
            const filteredResources = resources.filter(r => {
                const matchesTab = activeTab === "All" || r.unit === activeTab;
                const matchesFilter = activeFilter === "All" || r.type === activeFilter;
                return matchesTab && matchesFilter;
            });

            // Magic Heuristic Logic
            const handleMagicPaste = (text) => {
                setMagicInput(text);
                const lowerText = text.toLowerCase();
                
                // 1. Extract URL if present
                const urlRegex = /(https?:\/\/[^\s]+)/g;
                const foundUrl = text.match(urlRegex);
                if (foundUrl) {
                    setNewContent(foundUrl[0]);
                    // If content is just URL, we try to guess title from remaining, else leave title blank
                    const remaining = text.replace(foundUrl[0], '').trim();
                    if (remaining.length > 2) setNewTitle(remaining);
                }

                // 2. Detect Type
                if (lowerText.includes("quiz") || lowerText.includes("mcq") || lowerText.includes("test") || lowerText.includes("pyq")) {
                    setNewType("Quiz");
                } else if (lowerText.includes("note") || lowerText.includes("lecture") || lowerText.includes("summary")) {
                    setNewType("Note");
                } else {
                    setNewType("Flashcards"); // Default
                }

                // 3. Detect Unit
                let bestMatchUnit = "Unit I: Drama"; // Default
                let maxMatches = 0;

                Object.entries(keywords).forEach(([unit, words]) => {
                    let matches = 0;
                    words.forEach(w => {
                        if (lowerText.includes(w)) matches++;
                    });
                    if (matches > maxMatches) {
                        maxMatches = matches;
                        bestMatchUnit = unit;
                    }
                });

                if (maxMatches > 0) {
                    setNewUnit(bestMatchUnit);
                }
            };

            const handleAdd = (e) => {
                e.preventDefault();
                const newResource = {
                    id: Date.now(),
                    title: newTitle || "Untitled",
                    unit: newUnit,
                    type: newType,
                    content: newContent,
                    notes: newNotes
                };
                setResources([...resources, newResource]);
                setIsModalOpen(false);
                setNewTitle(""); setNewContent(""); setNewNotes(""); setMagicInput("");
            };

            const handleDelete = (id) => {
                if(confirm("Are you sure you want to delete this resource?")) {
                    setResources(resources.filter(r => r.id !== id));
                }
            };

            const getTypeColor = (type) => {
                switch(type) {
                    case 'Quiz': return 'bg-pink-300';
                    case 'Flashcards': return 'bg-cyan-300';
                    case 'Note': return 'bg-lime-300';
                    default: return 'bg-white';
                }
            };

            // Welcome Screen
            if (showWelcome) {
                return (
                    <div className="min-h-screen flex flex-col items-center justify-center bg-[#FFDEE9] bg-opacity-50 p-6 text-center relative overflow-hidden">
                        <div className="absolute top-10 left-10 w-32 h-32 bg-yellow-300 rounded-full border-4 border-black opacity-50"></div>
                        <div className="absolute bottom-10 right-10 w-40 h-40 bg-blue-300 rounded-full border-4 border-black opacity-50"></div>

                        <div className="bg-white p-8 rounded-[2rem] pop-card max-w-sm w-full z-10 animate-float">
                            <div className="bg-yellow-400 w-24 h-24 rounded-full border-4 border-black flex items-center justify-center mx-auto mb-6">
                                <GraduationCap size={48} className="text-black" />
                            </div>
                            <h1 className="text-3xl font-black text-black mb-2 tracking-wide">WELCOME!</h1>
                            <h2 className="text-2xl font-bold text-purple-600 mb-8 font-serif italic">Deeksha ji &lt;3</h2>
                            <button onClick={() => setShowWelcome(false)} className="w-full bg-cyan-400 text-black border-2 border-black text-xl font-bold py-4 rounded-xl pop-hover active:bg-cyan-500 transition-colors">Let's Study! üöÄ</button>
                        </div>
                    </div>
                );
            }

            return (
                <div className="min-h-screen pb-24 bg-[#FFFBEB] text-black">
                    <header className="bg-[#A78BFA] border-b-4 border-black sticky top-0 z-20">
                        <div className="max-w-5xl mx-auto px-4 py-4 flex justify-between items-center">
                            <div className="flex items-center gap-3">
                                <div className="bg-white p-2 rounded-lg border-2 border-black">
                                    <BookOpen size={24} />
                                </div>
                                <h1 className="text-2xl font-black text-white tracking-wider" style={{textShadow: '2px 2px 0 #000'}}>UGC NET</h1>
                            </div>
                            <button onClick={() => setIsModalOpen(true)} className="bg-[#FCD34D] hover:bg-[#F59E0B] text-black border-2 border-black px-4 py-2 rounded-lg flex items-center gap-2 font-bold pop-hover transition-colors">
                                <Plus size={20} /> <span className="hidden sm:inline">Add New</span>
                            </button>
                        </div>
                        <div className="bg-white border-b-4 border-black">
                            <div className="max-w-5xl mx-auto px-4 overflow-x-auto no-scrollbar">
                                <div className="flex space-x-2 min-w-max py-3">
                                    {units.map(unit => (
                                        <button key={unit} onClick={() => setActiveTab(unit)} className={`px-4 py-2 rounded-lg font-bold border-2 border-black transition-all whitespace-nowrap ${activeTab === unit ? 'bg-black text-white shadow-[4px_4px_0px_0px_rgba(255,255,255,1)] transform -translate-y-1' : 'bg-white text-black hover:bg-gray-100'}`}>
                                            {unit.replace('Unit ', 'U-').replace('English in India', 'India').replace('Literary Criticism', 'Criticism')}
                                        </button>
                                    ))}
                                </div>
                            </div>
                        </div>
                    </header>

                    <div className="max-w-5xl mx-auto px-4 mt-6">
                        <div className="flex flex-wrap gap-3 justify-center sm:justify-start">
                             <button onClick={() => setActiveFilter("All")} className={`px-4 py-1.5 rounded-full border-2 border-black font-bold text-sm transition-all ${activeFilter === "All" ? "bg-black text-white" : "bg-white text-black hover:bg-gray-100"}`}>All Types</button>
                            <button onClick={() => setActiveFilter("Flashcards")} className={`px-4 py-1.5 rounded-full border-2 border-black font-bold text-sm transition-all ${activeFilter === "Flashcards" ? "bg-cyan-300 shadow-[2px_2px_0px_0px_#000]" : "bg-white hover:bg-cyan-50"}`}>‚ö° Flashcards</button>
                            <button onClick={() => setActiveFilter("Quiz")} className={`px-4 py-1.5 rounded-full border-2 border-black font-bold text-sm transition-all ${activeFilter === "Quiz" ? "bg-pink-300 shadow-[2px_2px_0px_0px_#000]" : "bg-white hover:bg-pink-50"}`}>üéÆ Quiz</button>
                            <button onClick={() => setActiveFilter("Note")} className={`px-4 py-1.5 rounded-full border-2 border-black font-bold text-sm transition-all ${activeFilter === "Note" ? "bg-lime-300 shadow-[2px_2px_0px_0px_#000]" : "bg-white hover:bg-lime-50"}`}>üìù Notes</button>
                        </div>
                    </div>

                    <main className="max-w-5xl mx-auto px-4 py-6">
                        {filteredResources.length === 0 ? (
                            <div className="text-center py-20 bg-white border-2 border-black rounded-xl border-dashed">
                                <p className="text-xl font-bold text-gray-400">Nothing here yet! üßê</p>
                                <button onClick={() => setIsModalOpen(true)} className="text-blue-600 mt-2 font-bold underline">Add a card?</button>
                            </div>
                        ) : (
                            <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                                {filteredResources.map(resource => (
                                    <div key={resource.id} className={`pop-card rounded-2xl p-5 relative bg-white overflow-hidden group hover:-translate-y-1`}>
                                        <div className={`absolute top-0 left-0 w-full h-3 border-b-2 border-black ${getTypeColor(resource.type)}`}></div>
                                        <div className="flex justify-between items-start mb-3 mt-2">
                                            <span className={`text-xs font-black uppercase px-2 py-1 border border-black rounded shadow-[2px_2px_0px_0px_#000] ${getTypeColor(resource.type)}`}>{resource.type}</span>
                                            <button onClick={(e) => { e.stopPropagation(); handleDelete(resource.id); }} className="text-gray-400 hover:text-red-500 transition-colors"><Trash2 size={20} /></button>
                                        </div>
                                        <h3 className="font-black text-xl text-black mb-1 leading-tight">{resource.title}</h3>
                                        <p className="text-xs font-bold text-gray-500 mb-6 uppercase tracking-wider">{resource.unit}</p>
                                        {resource.type === 'Note' ? (
                                            <button onClick={() => setViewNote(resource)} className="w-full bg-lime-100 text-black border-2 border-black py-3 rounded-xl font-bold pop-hover flex items-center justify-center gap-2"><FileText size={20} /> Read It!</button>
                                        ) : (
                                            <div className="flex gap-2">
                                                <a href={resource.content} target="_blank" className="flex-1 bg-blue-100 text-black border-2 border-black py-3 rounded-xl font-bold pop-hover flex items-center justify-center gap-2"><ExternalLink size={20} /> Open</a>
                                                {resource.notes && (<button onClick={() => setViewNote(resource)} className="px-4 bg-gray-100 border-2 border-black rounded-xl pop-hover"><FileText size={20} /></button>)}
                                            </div>
                                        )}
                                    </div>
                                ))}
                            </div>
                        )}
                    </main>

                    {/* Funky Add Modal with Magic Paste */}
                    {isModalOpen && (
                        <div className="fixed inset-0 bg-black bg-opacity-80 z-50 flex items-center justify-center p-4 backdrop-blur-sm">
                            <div className="bg-white border-4 border-black rounded-3xl w-full max-w-md max-h-[90vh] flex flex-col shadow-[8px_8px_0px_0px_#FFF]">
                                <div className="flex justify-between items-center p-5 border-b-4 border-black bg-yellow-300 rounded-t-[1.3rem]">
                                    <h2 className="text-2xl font-black">Add Stuff ‚ú®</h2>
                                    <button onClick={() => setIsModalOpen(false)} className="bg-white border-2 border-black rounded-full p-1 hover:bg-red-400 hover:text-white transition-colors"><X size={24} /></button>
                                </div>
                                <div className="p-6 overflow-y-auto custom-scroll bg-white rounded-b-3xl">
                                    <form onSubmit={handleAdd} className="space-y-4">
                                        {/* Magic Paste Section */}
                                        <div className="bg-indigo-50 p-4 border-2 border-indigo-200 border-dashed rounded-xl mb-4">
                                            <div className="flex items-center gap-2 mb-2 text-indigo-600 font-bold">
                                                <Wand2 size={18} /> <span>Magic Auto-Detect</span>
                                            </div>
                                            <textarea 
                                                className="w-full p-3 border-2 border-indigo-100 rounded-xl focus:border-indigo-500 outline-none text-sm magic-input"
                                                placeholder="Paste a link + title here (e.g. 'Wordsworth Quiz https://gemini...'). We'll guess the rest!"
                                                rows="2"
                                                value={magicInput}
                                                onChange={(e) => handleMagicPaste(e.target.value)}
                                            ></textarea>
                                        </div>

                                        <div>
                                            <label className="block text-sm font-bold text-black mb-1">TITLE</label>
                                            <input required type="text" className="w-full p-3 border-2 border-black rounded-xl focus:bg-yellow-50 focus:shadow-[4px_4px_0px_0px_#000] outline-none transition-all font-bold" placeholder="e.g., Cool Poetry" value={newTitle} onChange={(e) => setNewTitle(e.target.value)} />
                                        </div>
                                        <div className="grid grid-cols-1 gap-4">
                                            <div>
                                                <label className="block text-sm font-bold text-black mb-1">UNIT</label>
                                                <select className="w-full p-3 border-2 border-black rounded-xl outline-none font-bold bg-white" value={newUnit} onChange={(e) => setNewUnit(e.target.value)}>
                                                    {units.filter(u => u !== "All").map(u => <option key={u} value={u}>{u}</option>)}
                                                </select>
                                            </div>
                                            <div>
                                                <label className="block text-sm font-bold text-black mb-1">TYPE</label>
                                                <select className="w-full p-3 border-2 border-black rounded-xl outline-none font-bold bg-white" value={newType} onChange={(e) => setNewType(e.target.value)}>
                                                    <option value="Flashcards">‚ö° Flashcards</option>
                                                    <option value="Quiz">üéÆ Quiz</option>
                                                    <option value="Note">üìù Note</option>
                                                </select>
                                            </div>
                                        </div>
                                        {newType !== 'Note' && (
                                            <div>
                                                <label className="block text-sm font-bold text-black mb-1">LINK</label>
                                                <input type="url" className="w-full p-3 border-2 border-black rounded-xl focus:bg-yellow-50 focus:shadow-[4px_4px_0px_0px_#000] outline-none transition-all font-bold" placeholder="https://..." value={newContent} onChange={(e) => setNewContent(e.target.value)} />
                                            </div>
                                        )}
                                        <div>
                                            <label className="block text-sm font-bold text-black mb-1">{newType === 'Note' ? 'CONTENT' : 'DESCRIPTION'}</label>
                                            <textarea className="w-full p-3 border-2 border-black rounded-xl focus:bg-yellow-50 focus:shadow-[4px_4px_0px_0px_#000] outline-none transition-all font-bold h-32 resize-none" placeholder="..." value={newNotes} onChange={(e) => setNewNotes(e.target.value)}></textarea>
                                        </div>
                                        <button type="submit" className="w-full bg-[#A78BFA] text-white border-2 border-black py-4 rounded-xl font-black text-lg pop-hover active:bg-[#8B5CF6]">SAVE IT! üíæ</button>
                                    </form>
                                </div>
                            </div>
                        </div>
                    )}
                    
                    {/* View Note Modal */}
                    {viewNote && (
                        <div className="fixed inset-0 bg-black bg-opacity-80 z-50 flex items-center justify-center p-4 backdrop-blur-sm">
                            <div className="bg-white border-4 border-black rounded-3xl w-full max-w-2xl max-h-[90vh] flex flex-col shadow-[8px_8px_0px_0px_#FFF]">
                                <div className={`flex justify-between items-start p-5 border-b-4 border-black rounded-t-[1.3rem] ${getTypeColor(viewNote.type)}`}>
                                    <div className="pr-4">
                                        <h2 className="text-xl font-black text-black leading-tight">{viewNote.title}</h2>
                                        <span className="text-xs font-bold text-black opacity-70 block mt-1">{viewNote.unit}</span>
                                    </div>
                                    <button onClick={() => setViewNote(null)} className="bg-white border-2 border-black rounded-full p-1 hover:bg-black hover:text-white transition-colors"><X size={24} /></button>
                                </div>
                                <div className="p-8 overflow-y-auto custom-scroll bg-white rounded-b-3xl">
                                    <div className="prose prose-lg max-w-none text-black whitespace-pre-wrap font-medium leading-relaxed font-sans">{viewNote.notes || "No content."}</div>
                                    {viewNote.content && (<a href={viewNote.content} target="_blank" className="mt-8 block w-full bg-blue-400 text-white border-2 border-black py-4 rounded-xl text-center font-black text-lg pop-hover">Open Link üîó</a>)}
                                </div>
                            </div>
                        </div>
                    )}
                </div>
            );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>
